"use strict";(self.webpackChunkdev_portal=self.webpackChunkdev_portal||[]).push([[8484],{3905:function(e,t,n){n.d(t,{Zo:function(){return s},kt:function(){return u}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),d=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},s=function(e){var t=d(e.components);return r.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},f=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),f=d(n),u=a,h=f["".concat(l,".").concat(u)]||f[u]||p[u]||i;return n?r.createElement(h,o(o({ref:t},s),{},{components:n})):r.createElement(h,o({ref:t},s))}));function u(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=f;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:a,o[1]=c;for(var d=2;d<i;d++)o[d]=n[d];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}f.displayName="MDXCreateElement"},9491:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return c},contentTitle:function(){return l},metadata:function(){return d},toc:function(){return s},default:function(){return f}});var r=n(7462),a=n(3366),i=(n(7294),n(3905)),o=["components"],c={title:"Overview",sidebar_position:1},l=void 0,d={unversionedId:"provider/feeder/overview",id:"provider/feeder/overview",isDocsHomePage:!1,title:"Overview",description:"TDEX Feeder is a service useful to feed one or more markets of one or more daemons with prices sourced from an exchange.",source:"@site/docs/provider/feeder/overview.md",sourceDirName:"provider/feeder",slug:"/provider/feeder/overview",permalink:"/docs/provider/feeder/overview",editUrl:"https://github.com/tdex-network/dev-portal/edit/master/docs/provider/feeder/overview.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Overview",sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"TDexdconnect",permalink:"/docs/provider/tdexdconnect"},next:{title:"Getting Started",permalink:"/docs/provider/feeder/getting_started"}},s=[{value:"Configuration",id:"configuration",children:[{value:"JSON file",id:"json-file",children:[]},{value:"Environment variables",id:"environment-variables",children:[]}]},{value:"Connect to target with Tdexdconnect URL",id:"connect-to-target-with-tdexdconnect-url",children:[]},{value:"What&#39;s next?",id:"whats-next",children:[]}],p={toc:s};function f(e){var t=e.components,n=(0,a.Z)(e,o);return(0,i.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://github.com/tdex-network/tdex-feeder"},"TDEX Feeder")," is a service useful to feed one or more markets of one or more daemons with prices sourced from an exchange."),(0,i.kt)("p",null,"The prices are fed to the daemon by consuming its ",(0,i.kt)("inlineCode",{parentName:"p"},"UpdateMarketPrice")," RPC of the Operator interface.",(0,i.kt)("br",{parentName:"p"}),"\n","The daemon, therefore, requires to be fully initialized and synced in order to receive and store incoming prices.",(0,i.kt)("br",{parentName:"p"}),"\n","On the other side, the feeder must have the proper macaroon and TLS certificate to establish a secure connection with the Operator interface in case it has macaroon/TLS enabled."),(0,i.kt)("h2",{id:"configuration"},"Configuration"),(0,i.kt)("h3",{id:"json-file"},"JSON file"),(0,i.kt)("p",null,"The Feeder is configured with a JSON file like the following:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "price_feeder": "kraken",\n  "interval": 300000,\n  "targets": [\n    {\n      "macaroons_path": "",\n      "tls_cert_path": "",\n      "rpc_address": "localhost:9000"\n    }\n  ]\n}\n')),(0,i.kt)("p",null,"By default, each ",(0,i.kt)("inlineCode",{parentName:"p"},"price_feeder")," implementation comes with a list of well-known markets that maps the Liquid asset pair of some market to the ticker used by the exchange."),(0,i.kt)("p",null,"At the time of writing TDEX Feeder supports Kraken, Bitfinex and Coinbase exchanges as ",(0,i.kt)("inlineCode",{parentName:"p"},"price_feeder"),"s and they come with the following well-known markets:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("em",{parentName:"li"},"L-BTC/L-USDt")," (Kraken, Bitfinex, Coinbase)",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("em",{parentName:"li"},"L-BTC")," asset: ",(0,i.kt)("inlineCode",{parentName:"li"},"6f0279e9ed041c3d710a9f57d0c02928416460c4b722ae3457a11eec381c526d")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("em",{parentName:"li"},"L-USDt")," asset: ",(0,i.kt)("inlineCode",{parentName:"li"},"ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("em",{parentName:"li"},"L-BTC/L-CAD")," (only Kraken)",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("em",{parentName:"li"},"L-BTC")," asset: ",(0,i.kt)("inlineCode",{parentName:"li"},"6f0279e9ed041c3d710a9f57d0c02928416460c4b722ae3457a11eec381c526d")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("em",{parentName:"li"},"L-CAD")," asset: ",(0,i.kt)("inlineCode",{parentName:"li"},"0e99c1a6da379d1f4151fb9df90449d40d0608f6cb33a5bcbfc8c265f42bab0a"))))),(0,i.kt)("p",null,"When started, if there are no well-known markets defined within the config file for the selected price feeder, the one provided by the latter is used and wrote to the configuration file."),(0,i.kt)("p",null,"For instance, you might see the ",(0,i.kt)("inlineCode",{parentName:"p"},"config.json")," file changing like the example below after starting the service by using Kraken:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "price_feeder": "kraken",\n  "interval": 300000,\n  "targets": [\n    {\n      "macaroons_path": "",\n      "tls_cert_path": "",\n      "rpc_address": "localhost:9000"\n    }\n  ],\n  "markets": {\n    "kraken": [\n      {\n        "base_asset": "6f0279e9ed041c3d710a9f57d0c02928416460c4b722ae3457a11eec381c526d",\n        "quote_asset": "ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2",\n        "ticker": "XBT/USDT"\n      }\n      {\n        "base_asset": "6f0279e9ed041c3d710a9f57d0c02928416460c4b722ae3457a11eec381c526d",\n        "quote_asset": "0e99c1a6da379d1f4151fb9df90449d40d0608f6cb33a5bcbfc8c265f42bab0a",\n        "ticker": "XBT/CAD"\n      }\n    ]\n  }\n}\n')),(0,i.kt)("p",null,"This makes it easy for you to add other markets in the future, since the list in the file take precedence over the one provided by the price feeder at runtime.  This way, you can eventually add other well-known markets to the list. All you will have to do is to retrieve the hashes of the asset pair and the correct exchange's ticker."),(0,i.kt)("p",null,"The service, then, establishes a connection with the target daemons (with or without mac/TLS auth enabled depending on their respective configuration) and lists all their markets, ",(0,i.kt)("strong",{parentName:"p"},"starting feeding ONLY those included in the list of well-known markets"),"."),(0,i.kt)("p",null,"In the example above, the Feeder updates the price of the markets of a daemon reachable at ",(0,i.kt)("em",{parentName:"p"},"localhost:9000")," every 5 minutes (",(0,i.kt)("inlineCode",{parentName:"p"},"interval")," is expressed in milliseconds). "),(0,i.kt)("h3",{id:"environment-variables"},"Environment variables"),(0,i.kt)("p",null,"The feeder supports 2 optional configuration arguments that can be modified via environment variables:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"FEEDER_CONFIG_PATH")," to change the path where to find the JSON file (defaults to ",(0,i.kt)("inlineCode",{parentName:"li"},"./config.json"),").",(0,i.kt)("br",{parentName:"li"}),"In this case, it's required to define the path, included the name of the JSON file itself - it can be different from the default one."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"FEEDER_LOG_LEVEL")," to increase or decrease the verbosity of the service during its lifetime.")),(0,i.kt)("h2",{id:"connect-to-target-with-tdexdconnect-url"},"Connect to target with Tdexdconnect URL"),(0,i.kt)("p",null,"It is possible for the feeder to connect to its target daemons via ",(0,i.kt)("em",{parentName:"p"},"tdexdconnect")," URLs instead of explicitly specify the address and the paths to the TLS certificate and macaroon files."),(0,i.kt)("p",null,"Once you ",(0,i.kt)("a",{parentName:"p",href:"/docs/provider/tdexdconnect#generate-connection-url-for-tdex-feeder"},"obtain the connection URL")," for this service, you can use it in the config file like:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "price_feeder": "kraken",\n  "interval": 300000,\n  "targets": [\n    {\n      "tdexdconnect_url": "tdexdconnect://localhost:9000?cert=MIICpzCCAk6gAwIBAgIRAL8OABMF9I4BA7qXQaqXwfIwCgYIKoZIzj0EAwIwQjENMAsGA1UEChMEdGRleDExMC8GA1UEAxMoTUJQZGlQaXJhbGJlcnRvLmhvbWVuZXQudGVsZWNvbWl0YWxpYS5pdDAeFw0yMTEwMDcxNDM2MTFaFw0yMjEwMDgxNDM2MTFaMEIxDTALBgNVBAoTBHRkZXgxMTAvBgNVBAMTKE1CUGRpUGlyYWxiZXJ0by5ob21lbmV0LnRlbGVjb21pdGFsaWEuaXQwWTATBgcqhkjOPQIBBggqhkjOPQMBBwNCAAQ6ANPEW3WLpgD6ziosN7PdvRWwg7kYR9CrIu3qvZNychEPC9mUsXKpTVIr5B1xAaFVlCktJ97M_EtDxrUYujJOo4IBIzCCAR8wDgYDVR0PAQH_BAQDAgKkMA8GA1UdEwEB_wQFMAMBAf8wHQYDVR0OBBYEFOjOtc87r1eukTrhwXvns90Fmae4MIHcBgNVHREEgdQwgdGCKE1CUGRpUGlyYWxiZXJ0by5ob21lbmV0LnRlbGVjb21pdGFsaWEuaXSCCWxvY2FsaG9zdIIEdW5peIIKdW5peHBhY2tldIcEfwAAAYcQAAAAAAAAAAAAAAAAAAAAAYcQ_oAAAAAAAAAAAAAAAAAAAYcQ_oAAAAAAAAAQCEC_uSHHLIcEwKgB14cQ_oAAAAAAAACcVyn__lDMuocQ_oAAAAAAAADp7kZyxh-R8IcQ_oAAAAAAAABBBISbVTjXoYcQ_oAAAAAAAACu3kj__gARIjAKBggqhkjOPQQDAgNHADBEAiB92avtyxI535y1zgtEUYSoSpve6rU5mPPU5j7MLm16kwIgfZuZma37mh70_8b659p3yO1-BzI8jFwkzIzbaRnFnnQ&macaroon=AgEFdGRleGQChQEDChAaDhCJUurJJwLVwvzUH-hZEgEwGhUKBm1hcmtldBIEcmVhZBIFd3JpdGUaFwoIb3BlcmF0b3ISBHJlYWQSBXdyaXRlGg4KBXByaWNlEgV3cml0ZRoVCgZ3YWxsZXQSBHJlYWQSBXdyaXRlGhYKB3dlYmhvb2sSBHJlYWQSBXdyaXRlAAAGIHMNd7Gp6l1gYiChAySJ3JmhriJVxW8F7nF2b4aouZXl"\n    }\n  ]\n}\n')),(0,i.kt)("p",null,"In this example, the feeder connects to a daemon in localhost and updates the prices of the ",(0,i.kt)("em",{parentName:"p"},"L-BTC/L-USDt")," market every 5 minutes. The TLS certificate and the macaroon to be used for a secure connection are encoded in the URL instead of being presented within files."),(0,i.kt)("h2",{id:"whats-next"},"What's next?"),(0,i.kt)("p",null,"Now that you have completed the configuration, it's time to ",(0,i.kt)("a",{parentName:"p",href:"/docs/provider/feeder/getting_started"},"start your feeder"),"."))}f.isMDXComponent=!0}}]);